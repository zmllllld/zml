### 1 JVM

JVM可以分为5个部分

- 类加载器：加载字节码（.class）文件到内存ClassLoader
- 运行时数据区：jvm核心内存空间结构模型(重点)
- 执行引擎：对jvm指令进行解析，翻译成机器码，解析完成之后提交到操作系统中
- 本地接口库：供java调用的融合了不同开发语言的原生库
- 本地方法库：java本地方法的具体实现

运行时数据区又分为：

- 方法区

存储虚拟机加载的类信息、常量、静态变量（编译器编译之后的代码）

方法区是一种规范，永久代是方法区的一种实现，JDK8删除了永久代，改用元空间来替代永久代

- 虚拟机栈

java方法执行的内存模型，java栈中存放的是多个栈帧，每个栈帧都对应一个被调用的方法，主要包括局部变量表，操作数栈，动态链接库，方法返回地址（方法出口）

每个方法的执行，JVM都会创建一个栈帧，将栈帧压入到java栈中，方法执行完毕，该栈帧出栈。

- 本地方法栈

本地方法栈和虚拟机栈都是用来执行方法的，区别在于虚拟机栈执行的是java方法。本地方法执行的是本地方法

什么是java的本地方法？

java是基于应用层的编程语言，无法访问底层操作系统，如果要访问底层就需要使用其他语言来完成功能，C/C++

1.在java程序中声明native修饰的方法，只有方法定义，没有方法实现，将该java文件编译成字节码文件

2.用java编译字节码文件，生成一个.h文件

3.写一个.cpp文件实现.h文件中的方法

4.将.cpp文件编译成动态链接库文件.dll

5.System.load

- 堆

java堆是用来存放对象的，java堆被所有线程所共享，在虚拟机启动时创建，用来存放对象的实例，是java内存结构中的重要组成模块，占用大部分的时间，分为年轻代，老年代，永久代

年轻代：

Edan、from Survivor、to Survivor

Eden:对象刚创建的时候，存放在Eden区，如果Eden放不下，则放在Survivor区

垃圾回收时，将Eden中存活的对象存入from Survivor区，下一次回收的时候，





元空间：

元空间是替代永久代的，都是方法区的实现，方法区只是一种规范。使用的是本地内存

- 程序计数器

程序计数器占用的内存空间较小，是当前线程所执行的字节码行号指示器，通过改变这个计数器的值来选取下一条需要执行的

### JUC

sleep不会释放当前资源，wait会释放